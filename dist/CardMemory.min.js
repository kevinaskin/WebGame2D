var $jscomp={scope:{},inherits:function(a,b){function c(){}c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a;for(var d in b)if(Object.defineProperties){var e=Object.getOwnPropertyDescriptor(b,d);e&&Object.defineProperty(a,d,e)}else a[d]=b[d]}},module$org$osdg$game2d$events$G2DEvent={},G2DEvent$$module$org$osdg$game2d$events$G2DEvent=function(a,b){this._type=a;this._data=b;this._target=null};G2DEvent$$module$org$osdg$game2d$events$G2DEvent.prototype.getType=function(){return this._type};
G2DEvent$$module$org$osdg$game2d$events$G2DEvent.prototype.getData=function(){return this._data};G2DEvent$$module$org$osdg$game2d$events$G2DEvent.prototype.internal_setTarget=function(a){this._target=a};G2DEvent$$module$org$osdg$game2d$events$G2DEvent.prototype.getTarget=function(){return this._target};G2DEvent$$module$org$osdg$game2d$events$G2DEvent.ENTER_FRAME="enterFrame";var $jscompDefaultExport$$module$org$osdg$game2d$events$G2DEvent=G2DEvent$$module$org$osdg$game2d$events$G2DEvent;
module$org$osdg$game2d$events$G2DEvent.default=$jscompDefaultExport$$module$org$osdg$game2d$events$G2DEvent;var module$org$osdg$game2d$events$G2DMouseEvent={},G2DMouseEvent$$module$org$osdg$game2d$events$G2DMouseEvent=function(a,b){module$org$osdg$game2d$events$G2DEvent.default.call(this,a,b)};$jscomp.inherits(G2DMouseEvent$$module$org$osdg$game2d$events$G2DMouseEvent,module$org$osdg$game2d$events$G2DEvent.default);G2DMouseEvent$$module$org$osdg$game2d$events$G2DMouseEvent.ENTER_FRAME=module$org$osdg$game2d$events$G2DEvent.default.ENTER_FRAME;
G2DMouseEvent$$module$org$osdg$game2d$events$G2DMouseEvent.CLICK="click";var $jscompDefaultExport$$module$org$osdg$game2d$events$G2DMouseEvent=G2DMouseEvent$$module$org$osdg$game2d$events$G2DMouseEvent;module$org$osdg$game2d$events$G2DMouseEvent.default=$jscompDefaultExport$$module$org$osdg$game2d$events$G2DMouseEvent;var module$org$osdg$game2d$events$G2DEventDispatcher={},G2DEventDispatcher$$module$org$osdg$game2d$events$G2DEventDispatcher=function(){this._listeners=new Map};G2DEventDispatcher$$module$org$osdg$game2d$events$G2DEventDispatcher.prototype.addEventListener=function(a,b){var c=this._listeners.get(a);c||(c=[],this._listeners.set(a,c));c.push(b)};
G2DEventDispatcher$$module$org$osdg$game2d$events$G2DEventDispatcher.prototype.removeEventListener=function(a,b){if(a=this._listeners.get(a))b?(b=a.indexOf(b),-1!=b&&a.splice(b,1)):a.length=0};G2DEventDispatcher$$module$org$osdg$game2d$events$G2DEventDispatcher.prototype.dispatchEvent=function(a){var b=this._listeners.get(a.getType());if(b&&0<b.length)for(var c=0;c<b.length;c++)b[c](a)};var $jscompDefaultExport$$module$org$osdg$game2d$events$G2DEventDispatcher=G2DEventDispatcher$$module$org$osdg$game2d$events$G2DEventDispatcher;
module$org$osdg$game2d$events$G2DEventDispatcher.default=$jscompDefaultExport$$module$org$osdg$game2d$events$G2DEventDispatcher;var module$org$osdg$game2d$display$Display={},Display$$module$org$osdg$game2d$display$Display=function(){module$org$osdg$game2d$events$G2DEventDispatcher.default.call(this);this._y=this._x=0;this._scaleY=this._scaleX=1;this._regY=this._regX=this._rotation=0;this._enabled=!0;this._parent=null;this._visible=!0};$jscomp.inherits(Display$$module$org$osdg$game2d$display$Display,module$org$osdg$game2d$events$G2DEventDispatcher.default);
Display$$module$org$osdg$game2d$display$Display.prototype.internal_draw=function(a){this._visible&&(a.save(),a.translate(this.x,this.y),a.scale(this.scaleX,this.scaleY),a.rotate(this.rotation),this.onDraw(a),a.restore())};Display$$module$org$osdg$game2d$display$Display.prototype.hitTestPoint=function(a,b){return!1};Display$$module$org$osdg$game2d$display$Display.prototype.getGlobalX=function(){var a=this.getParent();return a?a.getGlobalX()+this.x:0};
Display$$module$org$osdg$game2d$display$Display.prototype.getGlobalY=function(){var a=this.getParent();return a?a.getGlobalY()+this.y:0};Display$$module$org$osdg$game2d$display$Display.prototype.setEnabled=function(a){this._enabled=a};Display$$module$org$osdg$game2d$display$Display.prototype.isEnabled=function(){return this._enabled};Display$$module$org$osdg$game2d$display$Display.prototype.getParent=function(){return this._parent};
Display$$module$org$osdg$game2d$display$Display.prototype.setVisible=function(a){this._visible=a};Display$$module$org$osdg$game2d$display$Display.prototype.isVisible=function(){return this._visible};Display$$module$org$osdg$game2d$display$Display.prototype.internal_onClick=function(a){this.isEnabled()&&this.isVisible()&&this.hitTestPoint(a.layerX,a.layerY)&&(a=new module$org$osdg$game2d$events$G2DMouseEvent.default(module$org$osdg$game2d$events$G2DMouseEvent.default.CLICK),this.internal_dispatchEvent(a))};
Display$$module$org$osdg$game2d$display$Display.prototype.internal_dispatchEvent=function(a){a.internal_setTarget(this);this.dispatchEvent(a);this.getParent()&&this.getParent().internal_dispatchEvent(a)};Display$$module$org$osdg$game2d$display$Display.prototype.internal_setParent=function(a){this._parent=a};Display$$module$org$osdg$game2d$display$Display.prototype.internal_enterFrame=function(a){this.isEnabled()&&this.isVisible()&&this.dispatchEvent(a)};
Object.defineProperties(Display$$module$org$osdg$game2d$display$Display.prototype,{x:{configurable:!0,enumerable:!0,set:function(a){this._x=a},get:function(){return this._x}},y:{configurable:!0,enumerable:!0,set:function(a){this._y=a},get:function(){return this._y}},scaleX:{configurable:!0,enumerable:!0,set:function(a){this._scaleX=a},get:function(){return this._scaleX}},scaleY:{configurable:!0,enumerable:!0,set:function(a){this._scaleY=a},get:function(){return this._scaleY}},rotation:{configurable:!0,
enumerable:!0,set:function(a){this._rotation=a},get:function(){return this._rotation}},regX:{configurable:!0,enumerable:!0,set:function(a){this._regX=a},get:function(){return this._regX}},regY:{configurable:!0,enumerable:!0,set:function(a){this._regY=a},get:function(){return this._regY}}});var $jscompDefaultExport$$module$org$osdg$game2d$display$Display=Display$$module$org$osdg$game2d$display$Display;module$org$osdg$game2d$display$Display.default=$jscompDefaultExport$$module$org$osdg$game2d$display$Display;var module$org$osdg$game2d$display$Rectangle={},Rectangle$$module$org$osdg$game2d$display$Rectangle=function(a,b,c){module$org$osdg$game2d$display$Display.default.call(this);this._width=a;this._height=b;this._color=c};$jscomp.inherits(Rectangle$$module$org$osdg$game2d$display$Rectangle,module$org$osdg$game2d$display$Display.default);Rectangle$$module$org$osdg$game2d$display$Rectangle.prototype.onDraw=function(a){a.fillStyle=this._color;a.fillRect(-this.regX,-this.regY,this._width,this._height)};
Rectangle$$module$org$osdg$game2d$display$Rectangle.prototype.hitTestPoint=function(a,b){return a>this.getGlobalX()-this.regX&&b>this.getGlobalY()-this.regY&&a<this.getGlobalX()+this._width-this.regX&&b<this.getGlobalY()+this._height-this.regY};
Object.defineProperties(Rectangle$$module$org$osdg$game2d$display$Rectangle.prototype,{width:{configurable:!0,enumerable:!0,set:function(a){this._width=a},get:function(){return this._width}},height:{configurable:!0,enumerable:!0,set:function(a){this._height=a},get:function(){return this._height}},color:{configurable:!0,enumerable:!0,set:function(a){this._color=a},get:function(){return this._color}}});var $jscompDefaultExport$$module$org$osdg$game2d$display$Rectangle=Rectangle$$module$org$osdg$game2d$display$Rectangle;
module$org$osdg$game2d$display$Rectangle.default=$jscompDefaultExport$$module$org$osdg$game2d$display$Rectangle;var module$org$osdg$game2d$display$Text={},Text$$module$org$osdg$game2d$display$Text=function(a,b,c,d){module$org$osdg$game2d$display$Display.default.call(this);this._fontSize=b||10;this._fontFamily=c||"sans-serif";this._color=d||"#000000";this.generateFontString();this._text=a};$jscomp.inherits(Text$$module$org$osdg$game2d$display$Text,module$org$osdg$game2d$display$Display.default);Text$$module$org$osdg$game2d$display$Text.prototype.setText=function(a){this._text=a};
Text$$module$org$osdg$game2d$display$Text.prototype.getText=function(){return this._text};Text$$module$org$osdg$game2d$display$Text.prototype.generateFontString=function(){this._font=this._fontSize+"px "+this._fontFamily};Text$$module$org$osdg$game2d$display$Text.prototype.getFont=function(){return this._font};Text$$module$org$osdg$game2d$display$Text.prototype.getFontSize=function(){return this._fontSize};Text$$module$org$osdg$game2d$display$Text.prototype.getFontFamily=function(){return this._fontFamily};
Text$$module$org$osdg$game2d$display$Text.prototype.setFontSize=function(a){this._fontSize=a;this.generateFontString()};Text$$module$org$osdg$game2d$display$Text.prototype.setFontFamily=function(a){this._fontFamily=a;this.generateFontString()};Text$$module$org$osdg$game2d$display$Text.prototype.setColor=function(a){this._color=a};Text$$module$org$osdg$game2d$display$Text.prototype.getColor=function(){return this._color};
Text$$module$org$osdg$game2d$display$Text.prototype.onDraw=function(a){a.font=this._font;a.fillStyle=this._color;a.fillText(this._text,0,this._fontSize)};var $jscompDefaultExport$$module$org$osdg$game2d$display$Text=Text$$module$org$osdg$game2d$display$Text;module$org$osdg$game2d$display$Text.default=$jscompDefaultExport$$module$org$osdg$game2d$display$Text;var module$org$osdg$game2d$display$Container={},Container$$module$org$osdg$game2d$display$Container=function(){module$org$osdg$game2d$display$Display.default.call(this);this._children=[]};$jscomp.inherits(Container$$module$org$osdg$game2d$display$Container,module$org$osdg$game2d$display$Display.default);
Container$$module$org$osdg$game2d$display$Container.prototype.addChild=function(a){if(-1==this._children.indexOf(a))this._children.push(a),a.internal_setParent(this);else throw Error("The child is already in this container");};Container$$module$org$osdg$game2d$display$Container.prototype.removeChild=function(a){var b=this._children.indexOf(a);-1!=b&&(this._children.splice(b,1),a.internal_setParent(null))};Container$$module$org$osdg$game2d$display$Container.prototype.getChildren=function(){return this._children};
Container$$module$org$osdg$game2d$display$Container.prototype.getChildrenCount=function(){return this._children.length};Container$$module$org$osdg$game2d$display$Container.prototype.getChildAt=function(a){return this._children[a]};Container$$module$org$osdg$game2d$display$Container.prototype.removeAllChildren=function(){for(var a;this._children.length;)a=this._children.pop(),a.internal_setParent(null)};
Container$$module$org$osdg$game2d$display$Container.prototype.onDraw=function(a){for(var b=0;b<this._children.length;b++)this._children[b].internal_draw(a)};Container$$module$org$osdg$game2d$display$Container.prototype.internal_onClick=function(a){if(this.isEnabled()&&this.isVisible())for(var b=0;b<this._children.length;b++)this._children[b].internal_onClick(a)};
Container$$module$org$osdg$game2d$display$Container.prototype.internal_enterFrame=function(a){for(var b=0;b<this._children.length;b++)this._children[b].internal_enterFrame(a);module$org$osdg$game2d$display$Display.default.prototype.internal_enterFrame.call(this,a)};var $jscompDefaultExport$$module$org$osdg$game2d$display$Container=Container$$module$org$osdg$game2d$display$Container;module$org$osdg$game2d$display$Container.default=$jscompDefaultExport$$module$org$osdg$game2d$display$Container;var module$org$osdg$game2d$anim$PropertyAnim={},PropertyAnim$$module$org$osdg$game2d$anim$PropertyAnim=function(a,b,c,d,e,f){this._target=a;this._propertyName=b;this._from=c;this._to=d;this._frames=e;this._completeHandler=f;this._enterFrameHander=this.enterFrameHandler.bind(this);this._speed=(this._to-this._from)/this._frames;this._frameIndex=0;this._running=!1};
PropertyAnim$$module$org$osdg$game2d$anim$PropertyAnim.prototype.start=function(){this._running||(this._frameIndex=0,this._target[this._propertyName]=this._from,this._target.addEventListener(module$org$osdg$game2d$events$G2DEvent.default.ENTER_FRAME,this._enterFrameHander),this._running=!0)};
PropertyAnim$$module$org$osdg$game2d$anim$PropertyAnim.prototype.enterFrameHandler=function(a){this._target[this._propertyName]+=this._speed;this._frameIndex++;this._frameIndex>=this._frames&&(this._target.removeEventListener(module$org$osdg$game2d$events$G2DEvent.default.ENTER_FRAME,this._enterFrameHander),this._running=!1,this._target[this._propertyName]=this._to,this._completeHandler&&this._completeHandler())};module$org$osdg$game2d$anim$PropertyAnim.default=PropertyAnim$$module$org$osdg$game2d$anim$PropertyAnim;var module$org$osdg$game2d$app$Game2dApp={},Game2dApp$$module$org$osdg$game2d$app$Game2dApp=function(a,b){module$org$osdg$game2d$display$Container.default.call(this);this._enterFrameEvent=new module$org$osdg$game2d$events$G2DEvent.default(module$org$osdg$game2d$events$G2DEvent.default.ENTER_FRAME);this._stageWidth=a;this._stageHeight=b;this._canvas=document.createElement("canvas");this._canvas.width=this._stageWidth;this._canvas.height=this._stageHeight;this._context2d=this._canvas.getContext("2d");
this.addNativeListeners();this.render(0)};$jscomp.inherits(Game2dApp$$module$org$osdg$game2d$app$Game2dApp,module$org$osdg$game2d$display$Container.default);Game2dApp$$module$org$osdg$game2d$app$Game2dApp.prototype.addNativeListeners=function(){this._canvas.onclick=function(a){this.internal_onClick(a)}.bind(this)};Game2dApp$$module$org$osdg$game2d$app$Game2dApp.prototype.getStageWidth=function(){return this._stageWidth};Game2dApp$$module$org$osdg$game2d$app$Game2dApp.prototype.getStageHeight=function(){return this._stageHeight};
Game2dApp$$module$org$osdg$game2d$app$Game2dApp.prototype.render=function(a){this.internal_enterFrame(this._enterFrameEvent);this._context2d.clearRect(0,0,this._stageWidth,this._stageHeight);this.internal_draw(this._context2d);requestAnimationFrame(this.render.bind(this))};Game2dApp$$module$org$osdg$game2d$app$Game2dApp.prototype.getDom=function(){return this._canvas};var $jscompDefaultExport$$module$org$osdg$game2d$app$Game2dApp=Game2dApp$$module$org$osdg$game2d$app$Game2dApp;
module$org$osdg$game2d$app$Game2dApp.default=$jscompDefaultExport$$module$org$osdg$game2d$app$Game2dApp;var module$org$osdg$game2d$demos$cardmemory$Card={},Card$$module$org$osdg$game2d$demos$cardmemory$Card=function(a,b,c){module$org$osdg$game2d$display$Container.default.call(this);this._num=a;this._faceA=new module$org$osdg$game2d$display$Container.default;this._faceABg=new module$org$osdg$game2d$display$Rectangle.default(b,c,"red");this._faceABg.regX=b/2;this._faceA.addChild(this._faceABg);this._text=new module$org$osdg$game2d$display$Text.default(""+a,30);this._text.x=-5;this._faceA.addChild(this._text);
this.addChild(this._faceA);this._faceB=new module$org$osdg$game2d$display$Rectangle.default(b,c,"blue");this._faceB.regX=b/2;this.addChild(this._faceB);this.showFaceA()};$jscomp.inherits(Card$$module$org$osdg$game2d$demos$cardmemory$Card,module$org$osdg$game2d$display$Container.default);Card$$module$org$osdg$game2d$demos$cardmemory$Card.prototype.showFaceA=function(){this._faceA.setVisible(!0);this._faceB.setVisible(!1)};
Card$$module$org$osdg$game2d$demos$cardmemory$Card.prototype.showFaceB=function(){this._faceA.setVisible(!1);this._faceB.setVisible(!0)};Card$$module$org$osdg$game2d$demos$cardmemory$Card.prototype.turnToFaceB=function(){var a=this;this._faceA.isVisible()&&(new module$org$osdg$game2d$anim$PropertyAnim.default(this._faceA,"scaleX",1,0,10,function(){a.showFaceB();(new module$org$osdg$game2d$anim$PropertyAnim.default(a._faceB,"scaleX",0,1,10)).start()})).start()};
Card$$module$org$osdg$game2d$demos$cardmemory$Card.prototype.getNum=function(){return this._num};var $jscompDefaultExport$$module$org$osdg$game2d$demos$cardmemory$Card=Card$$module$org$osdg$game2d$demos$cardmemory$Card;module$org$osdg$game2d$demos$cardmemory$Card.default=$jscompDefaultExport$$module$org$osdg$game2d$demos$cardmemory$Card;var module$org$osdg$game2d$demos$cardmemory$CardMemory={},CardMemory$$module$org$osdg$game2d$demos$cardmemory$CardMemory=function(){module$org$osdg$game2d$app$Game2dApp.default.call(this,400,300);document.body.appendChild(this.getDom());this._points=[];this._cardHeight=this._cardWidth=50;this._currentNum=1;this.restartGame()};$jscomp.inherits(CardMemory$$module$org$osdg$game2d$demos$cardmemory$CardMemory,module$org$osdg$game2d$app$Game2dApp.default);
CardMemory$$module$org$osdg$game2d$demos$cardmemory$CardMemory.prototype.restartGame=function(){this._currentNum=1;this.removeAllChildren();this.generatePoints();this.addCards()};
CardMemory$$module$org$osdg$game2d$demos$cardmemory$CardMemory.prototype.addCards=function(){for(var a,b,c,d=1;5>=d;d++)a=new module$org$osdg$game2d$demos$cardmemory$Card.default(d,this._cardWidth-2,this._cardHeight-2),c=Math.floor(Math.random()*this._points.length),b=this._points[c],this._points.splice(c,1),a.x=b.x,a.y=b.y,a.addEventListener("click",this.cardClickedHandler.bind(this)),this.addChild(a)};
CardMemory$$module$org$osdg$game2d$demos$cardmemory$CardMemory.prototype.cardClickedHandler=function(a){if(this._currentNum==a.getTarget().getNum()){this.removeChild(a.getTarget());if(1==this._currentNum)for(a=0;a<this.getChildrenCount();a++)this.getChildAt(a).turnToFaceB();this._currentNum++;0==this.getChildrenCount()&&(alert("\u6210\u529f\u4e86,\u6e38\u620f\u5c06\u91cd\u65b0\u5f00\u59cb"),this.restartGame())}else alert("\u70b9\u9519\u4e86")};
CardMemory$$module$org$osdg$game2d$demos$cardmemory$CardMemory.prototype.generatePoints=function(){for(var a=this._points.length=0;8>a;a++)for(var b=0;6>b;b++)this._points.push({x:this._cardWidth*a+this._cardWidth/2,y:this._cardHeight*b})};new CardMemory$$module$org$osdg$game2d$demos$cardmemory$CardMemory;var $jscompDefaultExport$$module$org$osdg$game2d$demos$cardmemory$CardMemory=CardMemory$$module$org$osdg$game2d$demos$cardmemory$CardMemory;
module$org$osdg$game2d$demos$cardmemory$CardMemory.default=$jscompDefaultExport$$module$org$osdg$game2d$demos$cardmemory$CardMemory;

//# sourceMappingURL=../src/CardMemory.min.js.map
